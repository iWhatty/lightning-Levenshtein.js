"use strict";
const q=new Uint32Array(256);function z(m,l,c,e){let a=0,d=-1,k=c;for(var h=c,b=1<<c-1;h--;)q[m.charCodeAt(h)]|=1<<h;for(h=0;h<e;h++){let g=q[l.charCodeAt(h)];const r=g|a;g|=(g&d)+d^d;a|=~(g|d);d&=g;a&b&&k++;d&b&&k--;a=(a<<1|1)>>>0;d=(d<<1|~(r|a))>>>0;a&=r}for(h=c;h--;)q[m.charCodeAt(h)]=0;return k};function A(m,l,c,e){var a=Math.ceil(c/32),d=Math.ceil(e/32);const k=Array(a),h=Array(a);for(;a--;)h[a]=-1,k[a]=0;for(a=0;a<d-1;a++){var b=-1,g=0,r=32*a,p=Math.min(r+32,e);for(var f=r;f<p;f++)q[l.charCodeAt(f)]|=1<<f-r;for(f=0;f<c;f++){var n=q[m.charCodeAt(f)],u=f>>5,t=f&31,v=h[u]>>>t&1,w=k[u]>>>t&1,x=n|g;n=((n|w)&b)+b^b|n|w;g|=~(n|b);b&=n;h[u]^=(g>>>31^v)<<t;k[u]^=(b>>>31^w)<<t;g=g<<1|v;b=b<<1|w;b|=~(x|g);g&=x}for(;r<p;r++)q[l.charCodeAt(r)]=0}d=-1;b=0;p=32*a;a=Math.min(p+32,e);r=a-p-1;for(f=p;f<
a;f++)q[l.charCodeAt(f)]|=1<<f-p;for(f=0;f<c;f++)g=q[m.charCodeAt(f)],u=f>>5,t=f&31,v=h[u]>>>t&1,w=k[u]>>>t&1,x=g|b,g=((g|w)&d)+d^d|g|w,b|=~(g|d),d&=g,e+=(b>>>r&1)-(d>>>r&1),h[u]^=(b>>>31^v)<<t,k[u]^=(d>>>31^w)<<t,b=b<<1|v,d=d<<1|w,d|=~(x|b),b&=x;for(m=p;m<a;m++)q[l.charCodeAt(m)]=0;return e};function B(m,l,c=Number.MAX_SAFE_INTEGER){if(m===l)return 0;var e=m.length,a=l.length;if(0===e)return a;if(0===a)return e;"number"===typeof c&&0<c&&1>c&&(c=Math.ceil(c*e));e<a&&([m,l]=[l,m],[e,a]=[a,e]);var d=e;if(32>=e)if(c>d)c=z(m,l,e,a);else{var k=0,h=-1;d=e;c+=a;for(var b=e;b--;)q[m.charCodeAt(b)]|=1<<b;for(b=0;b<a;b++){var g=q[l.charCodeAt(b)],r=g|k;g|=(g&h)+h^h;k|=~(g|h);h&=g;d+=(k>>>e-1&1)-(h>>>e-1&1);if(d>c--)break;k=k<<1|1;h<<=1;h|=~(r|k);k&=r}for(b=e;b--;)q[m.charCodeAt(b)]=0;c=d}else if(c>
d)c=A(m,l,e,a);else{h=a;k=Math.ceil(e/32);b=Math.ceil(h/32);a=Array(k);for(d=Array(k);k--;)d[k]=-1,a[k]=0;for(k=0;k<b-1;k++){var p=-1,f=0;g=32*k;r=Math.min(g+32,h);for(var n=g;n<r;n++)q[l.charCodeAt(n)]|=1<<n-g;for(n=0;n<e;n++){var u=q[m.charCodeAt(n)],t=n>>5,v=n&31,w=d[t]>>>v&1,x=a[t]>>>v&1,y=u|f;u=((u|x)&p)+p^p|u|x;f|=~(u|p);p&=u;d[t]^=(f>>>31^w)<<v;a[t]^=(p>>>31^x)<<v;f=f<<1|w;p=p<<1|x;p|=~(y|f);f&=y}for(;g<r;g++)q[l.charCodeAt(g)]=0}b=-1;p=0;r=32*k;k=Math.min(r+32,h);g=k-r-1;for(n=r;n<k;n++)q[l.charCodeAt(n)]|=
1<<n-r;c+=e;for(n=0;n<e;n++){f=q[m.charCodeAt(n)];t=n>>5;v=n&31;w=d[t]>>>v&1;x=a[t]>>>v&1;y=f|p;f=((f|x)&b)+b^b|f|x;p|=~(f|b);b&=f;h+=(p>>>g&1)-(b>>>g&1);if(h>c--)break;d[t]^=(p>>>31^w)<<v;a[t]^=(b>>>31^x)<<v;p=p<<1|w;b=b<<1|x;b|=~(y|p);p&=y}for(c=r;c<k;c++)q[l.charCodeAt(c)]=0;c=h}return c};function C(m,l){if(m===l)return 0;let c=m.length,e=l.length;c<e&&([m,l]=[l,m],[c,e]=[e,c]);return 0===e?c:32>=c?z(m,l,c,e):A(m,l,c,e)};function D(m,l,c=Number.MAX_SAFE_INTEGER){let e=-1;c+=1;for(let a=0;a<l.length;a++){const d=B(m,l[a],c);if(d<c&&(c=d,e=a,0===d))break}return 0<=e?l[e]:null};
export {C as distance, B as distanceMax, D as closest};
