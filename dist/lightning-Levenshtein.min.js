const q=new Uint32Array(256);function z(c,l,n,e){let a=0,d=-1,k=n,h=n;for(var b=1<<n-1;h--;)q[c.charCodeAt(h)]|=1<<h;for(h=0;h<e;h++){var g=q[l.charCodeAt(h)],r=g|a;g|=(g&d)+d^d;a|=~(g|d);d&=g;a&b&&k++;d&b&&k--;a=a<<1|1;d=d<<1|~(r|a);a&=r}for(h=n;h--;)q[c.charCodeAt(h)]=0;return k};function A(c,l,n,e){var a=Math.ceil(n/32),d=Math.ceil(e/32);const k=Array(a),h=Array(a);for(;a--;)h[a]=-1,k[a]=0;for(a=0;a<d-1;a++){var b=-1,g=0,r=32*a,p=Math.min(r+32,e);for(var f=r;f<p;f++)q[l.charCodeAt(f)]|=1<<f-r;for(f=0;f<n;f++){var m=q[c.charCodeAt(f)],u=f>>5,t=f&31,v=h[u]>>>t&1,w=k[u]>>>t&1,x=m|g;m=((m|w)&b)+b^b|m|w;g|=~(m|b);b&=m;h[u]^=(g>>>31^v)<<t;k[u]^=(b>>>31^w)<<t;g=g<<1|v;b=b<<1|w;b|=~(x|g);g&=x}for(;r<p;r++)q[l.charCodeAt(r)]=0}d=-1;b=0;p=32*a;a=Math.min(p+32,e);r=a-p-1;for(f=p;f<
a;f++)q[l.charCodeAt(f)]|=1<<f-p;for(f=0;f<n;f++)g=q[c.charCodeAt(f)],u=f>>5,t=f&31,v=h[u]>>>t&1,w=k[u]>>>t&1,x=g|b,g=((g|w)&d)+d^d|g|w,b|=~(g|d),d&=g,e+=(b>>>r&1)-(d>>>r&1),h[u]^=(b>>>31^v)<<t,k[u]^=(d>>>31^w)<<t,b=b<<1|v,d=d<<1|w,d|=~(x|b),b&=x;for(c=p;c<a;c++)q[l.charCodeAt(c)]=0;return e};function B(c,l,n=Number.MAX_SAFE_INTEGER){if(c===l)return 0;var e=c.length,a=l.length;if(0===e)return a;if(0===a)return e;e<a&&([c,l]=[l,c],[e,a]=[a,e]);var d=e;if(32>=e)if(n>d)c=z(c,l,e,a);else{var k=0,h=-1;d=e;n+=a;for(var b=e;b--;)q[c.charCodeAt(b)]|=1<<b;for(b=0;b<a;b++){var g=q[l.charCodeAt(b)],r=g|k;g|=(g&h)+h^h;k|=~(g|h);h&=g;d+=(k>>>e-1&1)-(h>>>e-1&1);if(d>n--)break;k=k<<1|1;h<<=1;h|=~(r|k);k&=r}for(b=e;b--;)q[c.charCodeAt(b)]=0;c=d}else if(n>d)c=A(c,l,e,a);else{h=a;k=Math.ceil(e/32);b=Math.ceil(h/
32);a=Array(k);for(d=Array(k);k--;)d[k]=-1,a[k]=0;for(k=0;k<b-1;k++){var p=-1,f=0;g=32*k;r=Math.min(g+32,h);for(var m=g;m<r;m++)q[l.charCodeAt(m)]|=1<<m-g;for(m=0;m<e;m++){var u=q[c.charCodeAt(m)],t=m>>5,v=m&31,w=d[t]>>>v&1,x=a[t]>>>v&1,y=u|f;u=((u|x)&p)+p^p|u|x;f|=~(u|p);p&=u;d[t]^=(f>>>31^w)<<v;a[t]^=(p>>>31^x)<<v;f=f<<1|w;p=p<<1|x;p|=~(y|f);f&=y}for(;g<r;g++)q[l.charCodeAt(g)]=0}b=-1;p=0;r=32*k;k=Math.min(r+32,h);g=k-r-1;for(m=r;m<k;m++)q[l.charCodeAt(m)]|=1<<m-r;n+=e;for(m=0;m<e;m++){f=q[c.charCodeAt(m)];
t=m>>5;v=m&31;w=d[t]>>>v&1;x=a[t]>>>v&1;y=f|p;f=((f|x)&b)+b^b|f|x;p|=~(f|b);b&=f;h+=(p>>>g&1)-(b>>>g&1);if(h>n--)break;d[t]^=(p>>>31^w)<<v;a[t]^=(b>>>31^x)<<v;p=p<<1|w;b=b<<1|x;b|=~(y|p);p&=y}for(c=r;c<k;c++)q[l.charCodeAt(c)]=0;c=h}return c};function C(c,l){if(c===l)return 0;let n=c.length,e=l.length;if(0===n)return e;if(0===e)return n;n<e&&([c,l]=[l,c],[n,e]=[e,n]);return 32>=n?z(c,l,n,e):A(c,l,n,e)};function D(c,l,n=Number.MAX_SAFE_INTEGER){let e=-1;n+=1;for(let a=0;a<l.length;a++){const d=B(c,l[a],n);if(d<n&&(n=d,e=a,0===d))break}return 0<=e?l[e]:null};
export {C as distance, B as distanceMax, D as closest};
